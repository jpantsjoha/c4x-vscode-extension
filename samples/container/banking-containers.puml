@startuml Banking System - Container Diagram
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

LAYOUT_WITH_LEGEND()

title Container diagram for Internet Banking System

' External Actors
Person(customer, "Personal Banking Customer", "A customer of the bank")
Person_Ext(backOffice, "Back Office Staff", "Administration staff")

' External Systems
System_Ext(mainframe, "Mainframe Banking System", "Core banking system")
System_Ext(email, "E-mail System", "Microsoft Exchange")

' Banking System Boundary
System_Boundary(internetBanking, "Internet Banking System") {
    ' Frontend Containers
    Container(webApp, "Web Application", "Java, Spring MVC", "Delivers static content and SPA")
    Container(spa, "Single-Page Application", "JavaScript, Angular", "Provides banking functionality in browser")
    Container(mobileApp, "Mobile App", "Xamarin", "Provides mobile banking functionality")

    ' Backend Containers
    Container(apiApp, "API Application", "Java, Docker", "Provides banking API via JSON/HTTPS")
    ContainerDb(database, "Database", "Oracle Database", "Stores user data, transactions, logs")

    ' Internal Relationships
    Rel(webApp, spa, "Delivers to customer's browser")
    Rel(spa, apiApp, "Makes API calls to", "async, JSON/HTTPS")
    Rel(mobileApp, apiApp, "Makes API calls to", "JSON/HTTPS")
    Rel(apiApp, database, "Reads from and writes to", "JDBC")
}

' External Relationships
Rel(customer, webApp, "Visits bigbank.com/ib using", "HTTPS")
Rel(customer, spa, "Views balances and makes payments")
Rel(customer, mobileApp, "Views balances and makes payments")
Rel(backOffice, webApp, "Uses for administration", "HTTPS")

Rel(apiApp, mainframe, "Makes API calls to", "XML/HTTPS")
Rel_Neighbor(apiApp, email, "Sends e-mails using", "SMTP")

@enduml
